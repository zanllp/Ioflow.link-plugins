<!--PROFILE_START
{
    "name": "保存流到文件",
    "desc": "将接收到的数据序列化成json保存到本地文件中",
    "type": "output",
    "hash": "5ae2eaa6a8d9e729bbc9a775678fae0163ee64691be058be54595aadb44a7a1c",
    "id": 4
}
PROFILE_END-->
<div style="background-color: white">
    <button id="save2file" class="in-btn in-btn-primary">保存到本地</button>
    <span id="save-count" style="margin: 8px"></span>
</div>
<style>
    .in-input {
        color: rgba(0, 0, 0, 0.65);
        background: #FFF;
        line-height: 1.5;
        height: 40px;
        padding-left: 10px;
        line-height: 40px;
        width: 200px;
    }


    .in-btn {
        cursor: pointer;
        border: none;
        margin: 10px;
        color: white;
        font-size: 14px;
        height: 40px;
        padding: 0 20px;
        border-radius: 4px;
        color: rgba(0, 0, 0, 0.65);
        background: #FFF;
        border: 1px solid #d9d9d9;
    }

    .in-input:hover {
        border: 1px solid #1890ff;
        color: #1890ff;
        box-shadow: 0 0 4px;
        transition: all .3s;
    }

    .in-btn:hover {
        background: #1890ff;
        color: #FFF;
        transition: all .3s;
    }

    .in-btn-primary {
        background: #1890ff;
        color: #FFF;
    }

    .in-btn:focus {
        outline: none;
    }
</style>
<script>
    const data = [];
    $("#save2file").on('click', () => {
        const content = JSON.stringify(data);
        const save = document.createElement("a");
        save.setAttribute("download", "流.json");
        save.setAttribute("href", `data:application/json,${content}`);
        save.click();
        message.success("保存完成在下载中查看")
    })
    lc.onAccept = x => {
        data.push(x);
        $("#save-count").innerHTML = `数量: ${data.length}`;
    }
</script>